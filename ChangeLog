2002-08-18  Jon K Hellan  <hellan@acm.org>

	* configure.in: See below. Hope it's true this time.

2002-08-18  Jon K Hellan  <hellan@acm.org>

	* configure.in: Make --without-gnome work.

2002-08-18  Jon K Hellan  <hellan@acm.org>

	* acinclude.m4: Change it to just a comment referring to
	python/README-python.

	* acinclude.m4.am15: Added. A copy of the previous version, but no
	longer commented out. See python/README-python.

2002-08-17  Jody Goldberg <jody@gnome.org>

	* gsf/Makefile.am : install the xml header

2002-08-17  Jon K Hellan  <hellan@acm.org>

	* libgsf-gnome-1.pc.in (Cflags): Fix Libs line.

2002-08-17  Jon K Hellan  <hellan@acm.org>

	* Makefile.am (pkgconfig_DATA): Add libgsf-gnome-1.pc when
	--with-gnome is selected.
	(EXTRA_DIST): Add libgsf-gnome-1.spec, libgsf-gnome-1.spec.in and
	libgsf-gnome-1.pc.in

2002-08-16  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_close) : pad the last bat
	  and sbat block with unused rather than 0.
	(ole_pad_bat_unused) : New.

2002-08-16  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_close) : clean up the
	  iteration to calculate the number of bat blocks required to hold the
	  bat and metabat.  Fill in the bat flags for the metabat.

2002-08-16  Jody Goldberg <jody@gnome.org>

	* configure.in  : move bonobo and gnome-vfs into a standalone library.

	* gsf/gsf-infile-msole.c (ole_init_info) : add a warning about invalid
	  state.

	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_new) : Fill with 0xff
	  instead of 0 to be more compatible with MS.
	(gsf_outfile_msole_close) : If there is no small block data don't
	  pretend there is an allocation chain for it.  Write BAT entries for
	  the bat itself.  TODO : BAT entries for the metabat.

2002-08-16  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-io-context.c (gsf_io_context_update_progress): Don't
	zero out memory only to overwrite it.

2002-08-16  Jon K Hellan  <hellan@acm.org>

	* configure.in: Require autoconf 2.52

2002-08-16  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-metadata-bag.c (gsf_metadata_bag_new): Fix prototype.
	* gsf/gsf-output-memory.c (gsf_output_memory_new): Ditto.
	(gsf_output_memory_write): Fix brown-bag.

2002-08-15  Jon K Hellan  <hellan@acm.org>

	* configure.in: Test for orbit-python.

2002-08-15  Jon K Hellan  <hellan@acm.org>

	*  gsf/gsf-input-memory.c  (gsf_input_mmap_new):  Stop warnings on
	Solaris.

2002-08-15  Jon K Hellan  <hellan@acm.org>

	* gsf/gsf-shared-memory.c (gsf_shared_memory_finalize): Cast to
	gsf_off_t when checing for overflow.

	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_close,
	gsf_outfile_msole_write): Ditto.

	* gsf/gsf-input-bonobo.c (gsf_input_bonobo_seek): Ditto.

	* gsf/gsf-infile-zip.c (zip_find_trailer): Ditto.

	* gsf/gsf-output-stdio.c (gsf_output_stdio_seek): Use long, not
	off_t for offset arg. to fseek.

	* gsf/gsf-input-stdio.c (gsf_input_stdio_seek): Ditto.

	* gsf/gsf-input-memory.c (gsf_input_mmap_new): Add forgotten
	argument to g_error_new.

2002-08-15  Jon K Hellan  <hellan@acm.org>

	* configure.in: Bump minor verision to 1.3. Add AC_SYS_LARGEFILE.
 
	* gsf/gsf.h: Rename GsfOff_t enum to GsfSeekType. Define gsf_off_t
	type to use instead of off_t. We have to do this because we do not
	know what idea the application has of the size of off_t, this can
	be defined with #define _FILE_OFFS_BITS xx.
 
	* gsf/gsf-shared-memory.h (struct _GsfSharedMemory): Change type
	of size to gsf_off_t.
 
	* gsf/gsf-output-stdio.c (gsf_output_stdio_seek): Change type of
	offset parameter to gsf_off_t, type of 'whence' parameter to
	GsfSeekType. Check for overflow copying from gsf_off_t to off_t.
 
	* gsf/gsf-output-impl.h (struct _GsfOutput): Change type of
	cur_size, cur_offset to gsf_off_t.
	(GsfOutputClass): Change type of offset parameter of Seek method
	to gsf_off_t, type of 'whence' parameter to GsfSeekType.
 
	* gsf/gsf-output-gnomevfs.c (gsf_output_gnomevfs_new): Various
	fixes.
	(gsf_output_gnomevfs_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType.  Cast
	'whence' argument to gnome_vfs_seek to GnomeVFSFileOffset to shut
	up warning.
	(gsf_output_gnomevfs_write): Cast 'bytes' argument to
	gnome_vfs_write to GnomeVFSFileSize to shut up warning.
 
	* gsf/gsf-output-bonobo.c (gsf_output_bonobo_seek): Change type of
	offset parameter to gsf_off_t, type of 'whence' parameter to
	GsfSeekType.
 
	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_seek): Change type of
	offset parameter to gsf_off_t, type of 'whence' parameter to
	GsfSeekType. Type of offset argument to gsf_input_seek has changed
	to gsf_off_t. Use.
	(gsf_outfile_msole_close): Return type of gsf_output_tell is
	changed to gsf_off_t. Introduce gsf_off_t typed variable data_size
	to detect overflow. Type of size argument to gsf_output_set_size
	has changed to gsf_off_t. Use. Type of offset argument to
	gsf_output_seek has changed to gsf_off_t. Use.
	(gsf_outfile_msole_write): Return type of gsf_output_tell is
	changed to gsf_off_t. Introduce gsf_off_t typed variables wsize
	and start_offset to detect overflow.
 
	* gsf/gsf-libxml.c (gsf_libxml_read): Return type of
	gsf_input_remaining has changed to gsf_off_t. Use.
 
	* gsf/gsf-io-context.c (GSF_CLASS): G_TYPE_GLIB is the parent
	class, not the io-context class itself.
 
	* gsf/gsf-input.h: (gsf_input_size, gsf_input_remaining,
	gsf_input_tell): Change return type to gsf_off_t.
	(gsf_input_seek): Change type of offset parameter to gsf_off_t,
	type of 'whence' parameter to GsfSeekType.
 
	* gsf/gsf-input.c (gsf_input_dup): Type of offset argument to
	gsf_input_seek has changed to gsf_off_t. Use.
	(gsf_input_size, gsf_input_remaining, gsf_input_tell): Change
	return type to gsf_off_t.
	(gsf_input_seek): Change type of offset parameter to gsf_off_t,
	type of 'whence' parameter to GsfSeekType.
	(gsf_input_set_size): Change type of size parameter to gsf_off_t.
	(gsf_input_seek_emulate): Change type of pos parameter to
	gsf_off_t.
	(gsf_input_uncompress): Change type of cur_offset variable to
	gsf_off_t. Type of offset argument to gsf_input_seek has changed
	to gsf_off_t. Use.
 
	* gsf/gsf-input-textline.c (gsf_input_textline_new): Remove cast
	of size argument to gsf_input_set_size.
	(gsf_input_textline_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType.
	(gsf_input_textline_ascii_gets, gsf_input_textline_utf8_gets ):
	Add 'remain' variable, and make sure that overflows don't occur.
 
	* gsf/gsf-input-stdio.c (gsf_input_stdio_new): Change type of size
	variable to gsf_off_t.
	(gsf_input_stdio_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType. Check for
	overflow copying from gsf_off_t to off_t.
 
        * gsf/gsf-input-memory.h: Change type of length parameter to
	gsf_off_t.
 
	* gsf/gsf-input-memory.c (gsf_input_memory_new): Change type of
	length parameter to gsf_off_t.
	(gsf_input_memory_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType.
	(gsf_input_mmap_new): Check for overflow copying from st.st_size
	to ssize_t. Type of size argument to gsf_shared_memory_mmapped_new
	and gsf_input_set_size has changed to gsf_off_t. Use.
 
	* gsf/gsf-input-impl.h (struct _GsfInput): Change type of size,
	cur_offset to gsf_off_t.
	(GsfInputClass): Change type of offset parameter of Seek method to
	gsf_off_t, type of 'whence' parameter to GsfSeekType.
	(gsf_input_set_size): Change type of size parameter to gsf_off_t.
	(gsf_input_seek_emulate): Change type of pos parameter to
	gsf_off_t.
 
	* gsf/gsf-input-gzip.c (struct _GsfInputGZip): Change type of
	seek_skipped to gsf_off_t.
	(check_header): Type of offset argument to gsf_input_seek is
	changed to gsf_off_t. Use. Type of size argument to
	gsf_input_set_size has changed to gsf_off_t. Use.
	(gsf_input_gzip_read): Return type of gsf_input_remaing has
	changed to gsf_off_t. Use.
	(gsf_input_gzip_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType.
 
	* gsf/gsf-input-gnomevfs.c (gsf_input_gnomevfs_new): Change type
	of size variable to gsf_off_t. Cast 'code' argument to g_set_error
	to gint to shut up warning.
	(gsf_input_gnomevfs_read): Cast 'bytes' argument to gnome_vfs_read
	to GnomeVFSFileSize to shut up warning.
	(gsf_input_gnomevfs_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType.  Cast
	'whence' argument to gnome_vfs_seek to GnomeVFSFileOffset to shut
	up warning.
 
	* gsf/gsf-input-bonobo.c (struct _GsfInputBonobo): Change type of
	'pos' to gsf_off_t.
	(gib_synch_shared_ptr): Cast to gsf_off_t when assigning pos.
	(gsf_input_bonobo_new): Change type of size variable to
	CORBA_long.  Type of size argument to gsf_input_set_size is
	changed to gsf_off_t. Use.
	(gsf_input_bonobo_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType. Check for
	overflow copying from gsf_off_t to CORBA_long.
 
	* gsf/gsf-infile-zip.c (zip_find_trailer): Change return type to
	gsf_off_t. Check for overflow copying from gsf_off_t to size_t.
	(zip_dirent_new, gsf_infile_zip_new_child): Change type of offset
	parameter to gsf_off_t. Type of size argument to
	gsf_input_set_size has changed to gsf_off_t. Use.
	(gsf_infile_zip_new): Type of size argument to gsf_input_set_size
	has changed to gsf_off_t. Use.
 
	* gsf/gsf-infile-msvba.c (vba_inflate): Change type of offset
	parameter to gsf_off_t.
	(vba3_dir_read): Cast 2nd argument to vba_inflate to gsf_off_t.
	(gsf_infile_msvba_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType.
	(gsf_infile_msvba_new): Type of size argument to
	gsf_input_set_size has changed to gsf_off_t. Use.

	* gsf/gsf-infile-msole.c (ole_get_block, ole_init_info,
	gsf_infile_msole_read, gsf_infile_msole_new_child): Type of offset
	argument to gsf_input_seek has changed to gsf_off_t. Use.
	(gsf_infile_msole_seek): Change type of offset parameter to
	gsf_off_t, type of 'whence' parameter to GsfSeekType.
	(gsf_infile_msole_new_child, gsf_infile_msole_new): Type of size
	argument to gsf_input_set_size has changed to gsf_off_t. Use.

2002-08-12  Jody Goldberg <jody@gnome.org>

	* Release 1.2.0

2002-08-06  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-utils.c (gsf_le_get_double, gsf_le_set_double): New
	functions (from gnumeric).
	* gsf/gsf-utils.h: Add macros for signed types.

2002-08-05  Jody Goldberg <jody@gnome.org>

	* tests/test-msole1.c (test) : why did I add that limitation ?

2002-08-05  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-output.c (gsf_output_is_closed) : forgot to implement.

2002-08-02  Jody Goldberg <jody@gnome.org>

	* configure.in : bump version

	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_finalize) : add a safety
	  to close the file before finalizing.

	* gsf/gsf-output.c (gsf_output_finalize) : add a warning when
	  finalizing an unclosed stream.
	(gsf_output_init) : init the new is_closed flag.

2002-08-02  Rodrigo Moya <rodrigo@gnome-db.org>

	* gsf/gsf-io-context.c: removed progress_min and progress_max, since
	they don't seem too useful right now (ie, let's keep it simple).
	(gsf_io_context_clear): free progress_ranges list and initialize
	progress-related internal values.
	(gsf_io_context_update_progress): implemented.
	(gsf_io_context_class_init): added "progress" signal to class.

2002-08-01  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* doc/Makefile.am (HTML_DIR) : conditionally define.
	* doc/gsf-docs.sgml : tidy up.

2002-07-27  Dom Lachowicz <cinamod@hotmail.com>
	
	* MAINTAINERS : add myself
	* gsf-metadata-bag.[ch] : add cardinatliy (size) method 

2002-07-26  Dom Lachowicz <cinamod@hotmail.com>
	
	* gsf-output-bonobo.[ch]: implement output stream (untested)

2002-07-26  Dom Lachowicz <cinamod@hotmail.com>

	* gsf-meta-keys.h: list of default/builtin keys that we will want to support
	* gsf-metadata-bag.[ch]: add key creation and manipulation functions, update TODO list

2002-07-26  Dom Lachowicz <cinamod@hotmail.com>

	* gsf-metadata-bag.c: implement (untested)

2002-07-25  Dom Lachowicz <cinamod@hotmail.com>

        * gsf-input-gnomevfs.[ch]: implement (untested)
        * gsf-output-gnomevfs.[ch]: implement (untested)
        * gsf-output-memory.[ch]: implement (untested)

2002-07-22  Zbigniew Chyla  <cyba@gnome.pl>

	* gsf-input-gnomevfs.c (struct _GsfInputGnomeVFS):
	Added missing semicolon at the end of struct.

2002-07-21  Jody Goldberg <jody@gnome.org>

	* Release 1.1.0

2002-07-17  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-utils.c (gsf_mem_dump) : tweak.

2002-07-15  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-infile-msole.c (gsf_infile_msole_dup): Don't ignore err
	-- that will crash the caller.

	* gsf/gsf-input-memory.c (gsf_input_mmap_new): Plug file
	descriptor leaks.

2002-07-09  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input.c (gsf_input_dup) : avoid leak if derived dup has
	  already assigned a name.

2002-07-08  Jody Goldberg <jody@gnome.org>

	* tests/test-cp-msole.c (test) : simplify.

2002-07-08  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_new) : doh!
	  fix the header to include the correct small block shift.

2002-07-08  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-outfile-msole.c (ole_name_cmp) : new.
	(gsf_outfile_msole_new_child) : order the names correctly.
	(gsf_outfile_msole_close) : write meta bats.

	* gsf/gsf-msole-impl.h : add OLE_HEADER_METABAT_SIZE.
	* gsf/gsf-infile-msole.c (ole_init_info) : use it here.
	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_close) : and here.

2002-07-07  Jody Goldberg <jody@gnome.org>

	* gsf/Makefile.am : Make gsf-impl-utils.h public

2002-07-06  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-msole-impl.h : pull in more information.  We may not need it
	  but it makes for better documentation than 'unknown'

2002-07-06  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-outfile-msole.c : initial implementation.
	* gsf/gsf-outfile.c : initial implementation.
	* gsf/gsf-output.c : initial implementation.

2002-07-05  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c (ole_dirent_new) : be more anal in case the
	  input file has a cycle.

2002-07-03  Jody Goldberg <jody@gnome.org>

	* tests/test-textline.c (test) : make the compiler shut up.

2002-06-27  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-input-gzip.c (check_header): Set header_size here.
	(gsf_input_gzip_read): When allocating a buffer, allocate at least
	256 bytes so we don't have to realloc all the time.
	(gsf_input_gzip_read): Handle truncated streams.

	* gsf/gsf-input.c (gsf_input_seek): Handle seeks that go to same
	position here.
	(gsf_input_uncompress): Reorganise a bit.

	* gsf/gsf-infile-msole.c (ole_dirent_free): Actually free the
	dirent.  And the list of children.

2002-06-27  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-input-gzip.c (gsf_input_gzip_read): Exit on error.

	* gsf/gsf-infile-msole.c (ole_init_info): Always set error info.

	* configure.in (LIBGSF_LIBS): Include the Bonobo libs.

	* tests/test-msole2.c (test): Plug leak.  Uncompress source.

	* gsf/gsf-input.c (gsf_input_uncompress): New function.

	* gsf/gsf-input-gzip.c (gsf_input_gzip_finalize): Plug leak.

2002-06-27  Jon K Hellan  <hellan@acm.org>

	* gsf/gsf-input-bonobo.c: Actually check in the stuff mentioned
	yesterday.

2002-06-27  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-input-gzip.c (gsf_input_gzip_seek): Attempt
	implementation.

	* gsf/gsf-input.c (gsf_input_seek): Make pos an off_t.

2002-06-26  Jon K Hellan  <hellan@acm.org>

	* gsf/gsf-input-bonobo.c (struct _GsfInputBonobo): Replace stream
	attribute with GsfSharedBonoboStream * 'shared'. Add 'pos'
	attribute.
	(gib_synch_shared_ptr): New helper function. Seek the shared
	stream if necessary.
	(gsf_input_bonobo_new): Probably better to free the exceptions
	*after* retrieving the exception texts.  Initialize 'shared'.
	(gsf_input_bonobo_finalize): unref 'shared'.
	(gsf_input_bonobo_dup): Implement.
	(gsf_input_bonobo_read): Use shared stream. Use
	gib_synch_shared_ptr to seek first if necessary.
	(gsf_input_bonobo_seek): Ditto.
	(gsf_input_bonobo_init): Initialize 'shared'.

	* gsf/gsf-shared-bonobo-stream.[ch]: new helper class for bonobo
	stream IO. Lets us dup the streams.
	* gsf/Makefile.am: added new files.

2002-06-26  Morten Welinder  <terra@diku.dk>

	* configure.in: If needed, define __EXTENSIONS__.

2002-06-26  Jon K Hellan  <hellan@acm.org>

	* gsf/gsf-input-bonobo.c: Include bonobo-persist-stream.h
	(gsf_input_bonobo_read): Silence warning.

2002-06-25  Jon K Hellan  <hellan@acm.org>

	* configure.in: New flag --with-bonobo

	* gsf/Makefile.am (INCLUDES): added new files.

	* gsf/gsf-input-bonobo.[ch]: new class for bonobo stream IO.

2002-06-25  Rodrigo Moya <rodrigo@gnome-db.org>

	* gsf/gsf-io-context.[ch]: new class for managing IO contexts.

	* gsf/Makefile.am: added new files.

2002-06-24  Jody Goldberg <jody@gnome.org>

	* python/Makefile.am : pyexec is not available in automake-1.4.
	nor is nodist_.
	
	* acinclude.m4 : something was still interpretting the AC_REQUIRE even
	  though ti was commented out.  change case and comment for now to
	  avoid problems.

2002-06-23  Jon K Hellan  <hellan@acm.org>

	* acinclude.m4: Comment out everything.

2002-06-21  Jody Goldberg <jody@gnome.org>

	* configure.in : uncomment the AM_CONDITIONAL for WITH_PYTHON

2002-06-21  Jon K Hellan  <hellan@acm.org>

	* acinclude.m4: Add it. It provides AM_CHECK_PYTHON_HEADERS.

2002-06-20  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-outfile-msole.c (gsf_outfile_msole_new_child): Add
	missing arg.

2002-06-20  Jon K Hellan  <hellan@acm.org>

	* configure.in: Add support for building Python bindings, but
	comment it out because it requires automake1.5.

	* Makefile.am: Build python subdir if WITH_PYTHON is set.

2002-06-18  Rui M. Seabra <rms@1407.org>

	* libgsf-1.spec.in : set permission correctly
	    fix common mistake of Copyright flag into License flag.

2002-06-18  Jody Goldberg <jody@gnome.org>

	* configure.in : lower the libxml version req

2002-06-17  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-outfile.c (gsf_outfile_new_child) : adjust signature to
	  include 'is_dir'

2002-06-15  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input.c (gsf_input_eof) : fix docs.

	* gsf/gsf-utils.c (gsf_mem_dump) : use size_t.

2002-06-13  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input-textline.c (gsf_input_textline_ascii_gets) : implement.
	(gsf_input_textline_utf8_gets) : pretend to implement.

2002-06-13  Jody Goldberg <jody@gnome.org>

	* Makefile.am : move the tests into a standalone dir because they are
	  getting irritating to build for every single library rebuild.

2002-06-13  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-infile-msvba.c (vba_inflate): Make offset an off_t.

2002-06-13  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-outfile-msole.c : initial stub implementation.
	* gsf/gsf-outfile.c : initial stub implementation.
	* gsf/gsf-output-stdio.c : initial stub implementation.
	* gsf/gsf-output.c : initial stub implementation.

2002-06-13  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msvba.c (vba_inflate) : cleanup.

2002-06-13  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.h (GSF_OLE_GET_GUINT{8,16,32}) : move to
	  gsf-utils and rename.

	* gsf/gsf-input-memory.c (gsf_input_memory_dup) : silence warning.
	(gsf_input_mmap_new) : fix the no mmap case.

2002-06-12  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msvba.c (vba_inflate) : store the uncompressed
	  result.
	(vba_dirent_read) : new.  We can now lookup the correct offsets for
	  the compressed source.  The question remaining is how to fin the
	  start of the dir table ...

2002-06-12  Rodrigo Moya <rodrigo@gnome-db.org>

	* gsf/*: s/IS_GSF/GSF_IS.

2002-06-12  Jon K Hellan  <hellan@acm.org>

	* libgsf-1.pc.in (Requires): Add libxml-2.0

2002-06-11  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c (gsf_infile_msole_read) : fix reading into an
	  assigned buffer for small block files.

2002-06-10  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile.c (gsf_infile_child_by_name) : typo.

2002-06-09  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* gsf/test-msole1.c (read_types): Casts to suppress signedness
	  warnings.
	* gsf/gsf-input-memory.c (gsf_input_memory_read): Changed src type to
	  guchar.
	* gsf/gsf-input-textline.c (gsf_input_textline_ascii_gets): Cast
	  return value.
	* gsf/gsf-infile-msole.c (ole_dirent_new): Signedness fixes.
	* debian/*: updated; include pkgconfig file.

2002-06-09  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msvba.c : new.
	* gsf/test-msvba.c : new.

	* gsf/gsf-infile.c (gsf_infile_child_by_vname) : new utility routine.

2002-06-07  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input.c (gsf_input_dup) : Add an err parameter.

2002-06-07  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-input-stdio.c (gsf_input_stdio_new): Plug FILE* leak.
	(gsf_input_stdio_dup): Go via filename.

2002-06-07  Jody Goldberg <jody@gnome.org>

	* doc/Makefile.am : fix the type init function for gtk-doc.
	* gsf/* : fix docs a bit.

2002-06-07  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-utils.c (gsf_input_dump) : new utility split out of.
	* gsf/test-gzip1.c (test) : here.

	* gsf/test-msole2.c (test) : spruce this up a might so that it can be
	  used as a general utility to dump streams and storages.

	* gsf/gsf-input-stdio.c (gsf_input_stdio_dup) : dup the descriptor
	  before creating a new file handle.

2002-06-06  Jody Goldberg <jody@gnome.org>

	* configure.in : remove -Wmissing-noreturn

	* gsf/test-msole1.c (test) : remove the --use-memory bit.  Just use
	  mmap.  We can test the other input types in another program.

	* gsf/*.c : change the convention for wrappers.  They all add their
	       own references to the source rather than absorbing the ref that
	       was passed in.

2002-06-06  Jody Goldberg <jody@gnome.org>

	* configure.in : add zlib.
	* libgsf-1.pc.in (Cflags) : ditto.

	* gsf/gsf-input-gzip.c : wrapper to uncompress things.

	* gsf/gsf-libxml.c : some convenience routines for dealing with libxml.

	* gsf/test-gzip1.c :  add some tests for gzip.

2002-06-05  Morten Welinder  <terra@diku.dk>

	* gsf/*.[ch]: switch to using system types.

2002-06-05  Jon K Hellan  <hellan@acm.org>

	* gsf/Makefile.am: Fix typo - libgsf_1_includedir didn't get defined.

2002-06-05  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input-memory.c (gsf_input_mmap_new) : set the filename.

2002-06-04  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input.c (gsf_input_eof) : do this internally.
	* gsf/gsf-input* : remove the _eof methods.

2002-06-04  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-input-impl.h (GsfInputClass): Change structure members
	from "read" to "Read", etc.  This avoids names reserved by the
	system libraries.

2002-06-04  Morten Welinder  <terra@diku.dk>

	* gsf/test-msole1.c (test): Add --memory option.

	* gsf/gsf-shared-memory.c: New class.

	* gsf/gsf-input-memory.c (gsf_input_memory_new): Use new
	GsfSharedMemory class.
	(gsf_input_memory_read): Add missing parameter.

2002-06-01  Jody Goldberg <jody@gnome.org>

	* gsf/Makefile.am : Add gsf-input-textline.[ch]
	  Add gsf-libxml.[ch]

2002-05-30  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input-stdio.h : fix the name mismatch.

2002-05-28  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input.c (gsf_input_seek) : doh!

2002-05-28  Morten Welinder  <terra@diku.dk>

	* gsf/gsf-infile-msole.c (ole_make_bat): Cast via gconstpointer to
	please gcc.

	* gsf/gsf-infile-msole.h (GSF_OLE_GET_GUINT8, GSF_OLE_GET_GUINT16,
	GSF_OLE_GET_GUINT32): fix alignment problems.

	* gsf/test-msole1.c (read_types): Fix isspace usage.

2002-05-27  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c : add some prepoc constants to prep for
	  export support.

2002-05-25  Jody Goldberg <jody@gnome.org>

	* README : add more details

2002-05-25  Jody Goldberg <jody@gnome.org>

	* gsf/test-msole1.c (get_biff_opcode_name) : suppress warning.

	* gsf/gsf-input-memory.c (gsf_input_mmap_new) : ensure it is a regular
	  file.

	* configure.in : remove -Wundef to shut it up about glib.
	  remove -Wcast-qual because we sometimes need to explicitly cast away
	  const.  C does not have const_cast<>().

2002-05-25  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-impl-utils.h (GSF_CLASS_FULL) : suppress warning.

	* gsf/gsf-infile-msole.c (ole_dirent_new) : disable debug spew.
	(ole_init_info) : suppress bogus compile warning.
	  Use gsf_ole_get_guint32s to convert the data to normal endianness.
	(gsf_ole_get_guint32s) : new.
	(ole_info_read_metabat) : assume the metabat is already uses native
	  byte ordering.

	* gsf/gsf-input.c (gsf_input_seek) : suppress warning.
	(gsf_input_dup) : ditto.
	(gsf_input_init) : ditto.

2002-05-25  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* configure.in:
	  Actually use warning flags from GNOME_COMPILE_WARNINGS, so
	  "--enable-warnings=maximum" and "--with-iso-c" are honoured.
	  Test whether defining _BSD_SOURCE is needed for caddr_t.
	  (e.g. on Debian with -ansi for gcc3.0 and 3.1)
	  Test whether defining _POSIX_SOURCE is needed for fdopen().
	  Enable a lot more warnings.
	* debian/rules: minor tweaks.

2002-05-25  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input.c (gsf_input_seek) : more error checking.

2002-05-25  Jody Goldberg <jody@gnome.org>

	* gsf/test-msole1.c (test) : dump head of odd records.

	* gsf/gsf-input.c (gsf_input_seek) : do more of the work up here.
	* gsf/gsf-infile-msole.c (gsf_infile_msole_seek) : adjust here.
	* gsf/gsf-input-stdio.c (gsf_input_stdio_seek) : and here.
	* gsf/gsf-input-memory.c (gsf_input_memory_seek) : and here.

2002-05-25  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c (ole_dirent_new) : fix off by 1 error in
	  handling broken ascii stream names.

2002-05-25  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c (ole_init_info) : libole2 knew about a smidge
	  more of the ole header, use the sbat counter.

	* gsf/test-msole1.c (test) : even more sanity checking.

2002-05-25  Jody Goldberg <jody@gnome.org>

	* gsf/test-msole1.c (test) : add more safety checks to automate
	  validation of imported biff records.

	* gsf/gsf-infile-msole.c (ole_dirent_new) : Based on char-width2.xls
	  it looks like directory sizes are periodically screwed.

2002-05-25  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c : fix small block support.
	  Handle the bogus use of ascii stream names in some case.

2002-05-24  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input-stdio.c (gsf_input_stdio_new) : merge the size
	  checking in here and do more error reporting.
	(gsf_input_stdio_class_init) : delete gsf_input_stdio_size
	(gsf_input_stdio_size) : delete.

	* gsf/gsf-input.c (gsf_input_read) : put the bound check here.

2002-05-24  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input-stdio.c (gsf_input_stdio_new) : make buf_size unsigned.
	(gsf_input_stdio_finalize) : and here.
	(gsf_input_stdio_read) : and here.

	* gsf/gsf-input.c (gsf_input_seek) : As morten suggested this is
	  better as > size rather than >= size.

2002-05-24  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c (gsf_infile_msole_read) : only seek if we
	  need to.

2002-05-24  Jody Goldberg <jody@gnome.org>

	* gsf/test-msole1.c (test) : more debug info, and less content spew.

2002-05-23  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-input-stdio.c (gsf_input_stdio_size) : be more careful about
	  people who open devices.

2002-05-23  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c (ole_dirent_new) : more error handling.
	(ole_info_get_sb_file) : make things more readable and split this out.
	(gsf_infile_msole_new_child) : fix reading small blocks.

2002-05-23  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.h (GSF_OLE_GET_GUINT8) : move here.
	(GSF_OLE_GET_GUINT16) : ditto.
	(GSF_OLE_GET_GUINT32) : ditto.

2002-05-23  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-utils.h : Use the glib type macros instead of defining our
	  own.

2002-05-23  J.H.M. Dassen (Ray) <jdassen@debian.org>
 
 	* doc/Makefile.am: Introduced DOC_DIR so the location can be easily
 	overridden when building packages.
 	* debian/*: Preliminary Debian packaging.
 
2002-05-23  Jody Goldberg <jody@gnome.org>

	* gsf/gsf-infile-msole.c (ole_info_read_xbat) : DOH!
	  We need to check endianness when reading the bat elements.
	(gsf_infile_msole_read) : slow but effective work around for
	  breaking at block boundaries.  I'll work up something faster this
	  evening.

2002-05-19  Jody Goldberg <jody@gnome.org>

	* Start making this into a real package.
